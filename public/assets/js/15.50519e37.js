(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{407:function(_,v,t){"use strict";t.r(v);var a=t(2),s=Object(a.a)({},(function(){var _=this,v=_._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[v("h1",{attrs:{id:"宏任务和微任务"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#宏任务和微任务"}},[_._v("#")]),_._v(" 宏任务和微任务")]),_._v(" "),v("h2",{attrs:{id:"_1-什么是宏任务和微任务"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_1-什么是宏任务和微任务"}},[_._v("#")]),_._v(" "),v("strong",[_._v("1. 什么是宏任务和微任务")])]),_._v(" "),v("p",[_._v("JavaScript 把异步任务又做了进一步的划分，异步任务又分为两类，分别是：")]),_._v(" "),v("p",[_._v("① 宏任务（macrotask）")]),_._v(" "),v("ul",[v("li",[v("p",[_._v("异步 Ajax 请求、")])]),_._v(" "),v("li",[v("p",[_._v("setTimeout、setInterval、")])]),_._v(" "),v("li",[v("p",[_._v("文件操作")])]),_._v(" "),v("li",[v("p",[_._v("其它宏任务")])])]),_._v(" "),v("p",[_._v("② 微任务（microtask）")]),_._v(" "),v("ul",[v("li",[_._v("Promise.then、.catch 和 .finally")]),_._v(" "),v("li",[_._v("process.nextTick")]),_._v(" "),v("li",[_._v("其它微任务")])]),_._v(" "),v("p",[v("img",{attrs:{src:"https://img-blog.csdnimg.cn/5c982d45912349a4a66105d63ee383b4.png",alt:"image-20220809154714656"}})]),_._v(" "),v("h2",{attrs:{id:"_2-宏任务和微任务的执行顺序"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_2-宏任务和微任务的执行顺序"}},[_._v("#")]),_._v(" "),v("strong",[_._v("2. 宏任务和微任务的执行顺序")])]),_._v(" "),v("p",[v("img",{attrs:{src:"https://img-blog.csdnimg.cn/31ac7ed119444f5082382e680eb229e6.png",alt:"image-20220809155110515"}})]),_._v(" "),v("p",[_._v("每一个宏任务执行完之后，都会检查是否存在待执行的微任务，如果有，则执行完所有微任务之后，再继续执行下一个宏任务。")]),_._v(" "),v("h2",{attrs:{id:"_3-去银行办业务的场景"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_3-去银行办业务的场景"}},[_._v("#")]),_._v(" "),v("strong",[_._v("3. 去银行办业务的场景")])]),_._v(" "),v("p",[_._v("① 小云和小腾去银行办业务。首先，需要取号之后进行排队")]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("宏任务队列")])])]),_._v(" "),v("p",[_._v("② 假设当前银行网点只有一个柜员，小云在办理存款业务时，小腾只能等待")]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("单线程，宏任务按次序执行")])])]),_._v(" "),v("p",[_._v("③ 小云办完存款业务后，柜员询问他是否还想办理其它业务？")]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("当前宏任务执行完，检查是否有微任务")])])]),_._v(" "),v("p",[_._v("④ 小云告诉柜员：想要买理财产品、再办个信用卡、最后再兑换点马年纪念币？")]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("执行微任务，后续宏任务被推迟")])])]),_._v(" "),v("p",[_._v("⑤ 小云离开柜台后，柜员开始为小腾办理业务")]),_._v(" "),v("ul",[v("li",[v("strong",[_._v("所有微任务执行完毕，开始执行下一个宏任务")])])]),_._v(" "),v("h2",{attrs:{id:"_4-分析以下代码输出的顺序"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#_4-分析以下代码输出的顺序"}},[_._v("#")]),_._v(" 4. 分析以下代码输出的顺序")]),_._v(" "),v("p",[_._v("经典面试题")]),_._v(" "),v("p",[v("img",{attrs:{src:"https://img-blog.csdnimg.cn/b43b946be09247278c137509293f1fa4.png",alt:"image-20220809155330826"}})]),_._v(" "),v("p",[_._v("正确的输出顺序是：2431")]),_._v(" "),v("p",[_._v("分析：")]),_._v(" "),v("p",[_._v("① 先执行所有的同步任务")]),_._v(" "),v("ul",[v("li",[_._v("执行第 6 行、第 12 行代码")])]),_._v(" "),v("p",[_._v("② 再执行微任务")]),_._v(" "),v("ul",[v("li",[_._v("执行第 9 行代码")])]),_._v(" "),v("p",[_._v("③ 再执行下一个宏任务")]),_._v(" "),v("ul",[v("li",[_._v("执行第 2 行代码")])]),_._v(" "),v("p",[_._v("经典面试题：")]),_._v(" "),v("p",[_._v("请分析以下代码输出的顺序（代码较长，截取成了左中右 3 个部分） ：")]),_._v(" "),v("p",[v("img",{attrs:{src:"https://img-blog.csdnimg.cn/f1e70f354a2e4d9c814e9a2a5b46135e.png",alt:"image-20220809155701681"}})]),_._v(" "),v("p",[_._v("正确的输出顺序是：156234789")])])}),[],!1,null,null,null);v.default=s.exports}}]);